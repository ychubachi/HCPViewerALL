\title BMI計算プログラム
\module 複数人のBMI算出用体型データを管理する
\author Hajime Ohiwa (revised by Yoshiaki Matsuzawa)
\date 2009/09/10
\version 0.62

\module main

\rdata 体型
	\data ID
	\data 身長
	\data 体重
\data 体型データ数

複数人の体型データを管理するa
	開始メッセージを表示する

	体型データの管理を行う
		前処理を行う
			体型データを読み込む
				ファイルを開く
				\repeat 体型データをファイルから読み込む \out 体型データ
				データ数を保存する \out 体型データ数
				ファイルを閉じる

		\repeat 体型データの管理を行う
			\mod disp \in 体型データ

			管理コマンドメニューを表示し、コマンドを入力させる
			\fork コマンドを実行する
				\branch 「データ追加」が選択された場合 \note 1番で実装
					\mod add
				\branch 「データ削除」が選択された場合 \note 2番で実装
					\mod del
				\branch 管理終了が選択された場合 \note 9番で実装
					\return

		後処理を行う
			体型データを保存する
				ファイルを開く
				\repeat 体型データをファイルに書き込む \in 体型データ
				ファイルを閉じる
	終了メッセージを表示する


\module disp

\data 体型データ

体型データの一覧を表示する \in 体型データ
	タイトルを表示する
	\repeat 体型データを表示する
		BMI値を計算する \in 体型データ \out BMI値
		体型データを表示する \note ID、身長、体重、BMI値 \in 体型データ, BMI値


\module add

体型データを1件追加する \in 体型データ，体型データ数

	\data ID
	\data 身長
	\data 体重

	体型データの入力を受け付ける
		IDを入力させる
			IDの入力要求を表示する
			IDを入力させる \out ID
			\ec 入力されたIDの妥当性をチェックする
				\branch 妥当ではないIDが入力された
					\ex 再入力を促す

		身長を入力させる
			身長の入力要求を表示する
			身長を入力させる \out 身長
			\ec 入力された身長の妥当性をチェックする
				\fork チェック結果に対応した処理を行う
					\branch 妥当ではない身長が入力された
						\ex 再入力を促す

		体重を入力させる
			体重の入力要求を表示する
			体重を入力させる \out 体重
			\ec 入力された体重の妥当性をチェックする
				\fork チェック結果に対応した処理を行う
					\branch 妥当ではない体重が入力された
						\ex 再入力を促す

	体型データを追加する
		入力されたデータを保存する \in ID, 身長, 体重 \out 体型データ
		データ数をカウントアップする \in 体型データ数 \out 体型データ数

\module del

\data 体型データ

体型データを1件削除する \in 体型データ，体型データ数

	\data ID
	削除するデータのIDを入力させる
		IDの入力要求を表示する
		IDを入力させる \out ID
		\ec 入力されたIDの妥当性をチェックする
			\branch 妥当ではないIDが入力された
				\ex 再入力を促す

	削除する体型データを検索する \in ID
	\ec 指定IDのデータが存在したかチェックする
		\branch 指定IDのデータが見つからなかった場合
			データが見つからなかった旨のメッセージを表示する
			\return

	体型データを削除する \in 体型データ,ID \out 体型データ
		体型データを詰める
		データ数をカウントダウンする
	データを削除した旨のメッセージを表示する